import{c as w,a as c,t as N}from"../chunks/HCuMicKI.js";import{i as J}from"../chunks/Cs66ILYH.js";import{p as Q,a as U,f as T,a1 as f,a2 as v,w as t,s as V,z as Y}from"../chunks/AGc4v_Jp.js";import{i as A}from"../chunks/Bn46RIuP.js";import{e as Z,i as tt}from"../chunks/DXct-rb-.js";import{s as at,a as et}from"../chunks/C7nj3rmD.js";import{w as rt,o as ot}from"../chunks/v9RRueV-.js";import{g as I}from"../chunks/D7DVG4ti.js";import{A as D,a as E,i as st,L as nt,t as it}from"../chunks/CCtgv_FT.js";import{p as lt}from"../chunks/C77BM_1A.js";import{L as ct}from"../chunks/Dpal_zfu.js";import{P as ft}from"../chunks/QyKjbkta.js";import{L as mt}from"../chunks/DZEORbCA.js";var P={BACKEND_CANISTER_ID:"elbip-aiaaa-aaaal-qjfhq-cai",FRONTEND_CANISTER_ID:"gw4gh-taaaa-aaaal-qjfia-cai",DFX_NETWORK:"ic"};class gt{constructor(){}async getGolfTeams(r){try{let e=await(await D.createIdentityActor(E,P.BACKEND_CANISTER_ID??"")).getGolfTeams(r);return st(e)&&console.error("Error Fetching Golf Teams",e),e.ok}catch(a){throw console.error("Error Fetching Golf Teams",a),a}}async createGolfTeam(r){try{return(await(await D.createIdentityActor(E,P.BACKEND_CANISTER_ID??"")).createGolfTeam(r)).ok}catch(a){throw console.error("Error creating golf team:",a),a}}}function ut(){const{subscribe:m,set:r}=rt(void 0);async function a(e){return new gt().getGolfTeams(e)}return{subscribe:m,setGolfTeam:e=>r(e),getGolfTeams:a}}const pt=ut();function _t(m,r){lt(r,"golfTeam",8)}var dt=N("<p>No golf teams found.</p>"),Tt=N("<!> <!>",1),vt=N("<p>Error loading golf teams.</p>");function Ct(m,r){Q(r,!1);const[a,e]=at(),$=()=>et(E,"$authStore",a);let h=v(!0),o=v(null),g=v(1n),y=v(1n);ot(async()=>{G()});function L(){I("/golf-Teams/create")}async function C(u){const s=Number(t(g))+u;s>=1&&s<=Number(t(y))&&(f(g,BigInt(s)),await G())}async function G(){f(h,!0);try{const s=$().identity?.getPrincipal();if(!s){I("/");return}let p={page:t(g),user_id:s.toString(),searchTerm:""};f(o,await pt.getGolfTeams(p)),t(o)?.total&&t(o)?.pageSize&&f(y,BigInt(Math.ceil(Number(t(o).total)/Number(t(o).pageSize))))}catch{it.addToast({type:"error",message:"Error loading golf teams."}),f(o,null)}finally{f(h,!1)}}J(),nt(m,{children:(u,s)=>{var p=w(),F=T(p);{var R=n=>{mt(n)},B=n=>{ct(n,{title:"GOLF TEAMS",buttonTitle:"ADD GOLF TEAM",buttonCallback:L,children:(k,ht)=>{var b=w(),q=T(b);{var K=i=>{var _=Tt(),S=T(_);{var O=l=>{var d=w(),W=T(d);Z(W,1,()=>t(o)?.entries,tt,(X,H)=>{_t(X,{get golfTeam(){return t(H)}})}),c(l,d)},x=l=>{var d=dt();c(l,d)};A(S,l=>{t(o).entries.length>0?l(O):l(x,!1)})}var z=V(S,2);const j=Y(()=>Number(t(g)));ft(z,{changePage:C,get currentPage(){return t(j)},get totalPages(){return t(y)}}),c(i,_)},M=i=>{var _=vt();c(i,_)};A(q,i=>{t(o)?i(K):i(M,!1)})}c(k,b)},$$slots:{default:!0}})};A(F,n=>{t(h)?n(R):n(B,!1)})}c(u,p)},$$slots:{default:!0}}),U(),e()}export{Ct as component};
