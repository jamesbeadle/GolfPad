import{c as N,a as p,t as b}from"../chunks/HCuMicKI.js";import{i as J}from"../chunks/Cs66ILYH.js";import{p as Q,a as V,f as S,a1 as _,a2 as h,w as a,s as Z,z as tt}from"../chunks/AGc4v_Jp.js";import{i as D}from"../chunks/Bn46RIuP.js";import{e as et,i as rt}from"../chunks/DXct-rb-.js";import{s as at,a as ot}from"../chunks/C7nj3rmD.js";import{w as it,o as nt}from"../chunks/v9RRueV-.js";import{g as k}from"../chunks/D7DVG4ti.js";import{A as s,a as n,i as c,L as st,t as ct}from"../chunks/CCtgv_FT.js";import{p as mt}from"../chunks/C77BM_1A.js";import{L as lt}from"../chunks/Dpal_zfu.js";import{P as ut}from"../chunks/QyKjbkta.js";import{L as gt}from"../chunks/DZEORbCA.js";var m={BACKEND_CANISTER_ID:"elbip-aiaaa-aaaal-qjfhq-cai",FRONTEND_CANISTER_ID:"gw4gh-taaaa-aaaal-qjfia-cai",DFX_NETWORK:"ic"};class C{constructor(){}async getGameSummaries(e){try{let t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID??"")).getGameSummaries(e);return c(t)&&console.error("Error Fetching Game Summaries",t),t.ok}catch(r){throw console.error("Error Fetching Game Summaries",r),r}}async getGame(e){try{const r=await s.createIdentityActor(n,m.BACKEND_CANISTER_ID??"");let t={gameId:BigInt(e)},l=await r.getGame(t);return c(l)&&console.error("Error Fetching Game",l),l.ok}catch(r){throw console.error("Error Fetching Game",r),r}}async createGame(e){const t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID)).createGame(e);if(c(t))throw new Error("Error Creating Game");return t.ok}async beginGame(e){const t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID)).beginGame(e);if(c(t))throw new Error("Error Setting Up Game");return t.ok}async predictGame(e){const t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID)).predictGame(e);if(c(t))throw new Error("Error Making Game Prediction");return t.ok}async addGameScore(e){const t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID)).addGameScore(e);if(c(t))throw new Error("Error Adding Game Score");return t.ok}async deleteGame(e){const t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID)).deleteGame(e);if(c(t))throw new Error("Error Deleting Game");return t.ok}async inviteGolfers(e){const t=await(await s.createIdentityActor(n,m.BACKEND_CANISTER_ID)).inviteGolfers(e);if(c(t))throw new Error("Error Inviting Golfers To Game");return t.ok}}function dt(){const{subscribe:A,set:e}=it([]);async function r(o){return new C().getGameSummaries(o)}async function t(o){return new C().getGame(o)}async function l(o){return new C().createGame(o)}return{subscribe:A,setGame:o=>e(o),getGame:t,createGame:l,getGameSummaries:r}}const ft=dt();function pt(A,e){mt(e,"game",8)}var _t=b("<p>You have no games.</p>"),At=b("<!> <!>",1),yt=b("<p>Error loading game summaries.</p>");function kt(A,e){Q(e,!1);const[r,t]=at(),l=()=>ot(n,"$authStore",r);let o=h(!0),i=h(null),y=h(1n),v=h(1n);nt(async()=>{T()});function P(){k("/games/create")}async function K(w){const u=Number(a(y))+w;u>=1&&u<=Number(a(v))&&(_(y,BigInt(u)),await T())}async function T(){_(o,!0);try{const u=l().identity?.getPrincipal();if(!u){k("/");return}let E={page:a(y),user_id:u.toString()};_(i,await ft.getGameSummaries(E)),a(i)?.total&&a(i)?.pageSize&&_(v,BigInt(Math.ceil(Number(a(i).total)/Number(a(i).pageSize))))}catch{ct.addToast({type:"error",message:"Error loading game summaries."}),_(i,null)}finally{_(o,!1)}}J(),st(A,{children:(w,u)=>{var E=N(),$=S(E);{var F=g=>{gt(g)},L=g=>{lt(g,{title:"GAMES",buttonTitle:"NEW GAME",buttonCallback:P,children:(M,wt)=>{var B=N(),q=S(B);{var x=d=>{var G=At(),R=S(G);{var j=f=>{var I=N(),X=S(I);et(X,1,()=>a(i)?.entries,rt,(Y,H)=>{pt(Y,{get game(){return a(H)}})}),p(f,I)},O=f=>{var I=_t();p(f,I)};D(R,f=>{a(i).entries.length>0?f(j):f(O,!1)})}var W=Z(R,2);const U=tt(()=>Number(a(y)));ut(W,{changePage:K,get currentPage(){return a(U)},get totalPages(){return a(v)}}),p(d,G)},z=d=>{var G=yt();p(d,G)};D(q,d=>{a(i)?d(x):d(z,!1)})}p(M,B)},$$slots:{default:!0}})};D($,g=>{a(o)?g(F):g(L,!1)})}p(w,E)},$$slots:{default:!0}}),V(),t()}export{kt as component};
