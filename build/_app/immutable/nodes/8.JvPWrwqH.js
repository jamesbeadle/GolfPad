import{c as v,a as d,t as D}from"../chunks/BMmDdByd.js";import{i as Q}from"../chunks/YJLFel-1.js";import{p as U,a as Y,f as w,a1 as g,a2 as E,w as o,s as Z,z as tt}from"../chunks/-IhJ7JpO.js";import{i as b}from"../chunks/C5k5KcEQ.js";import{e as et,i as rt}from"../chunks/C8_ZPc39.js";import{s as ot,a as at}from"../chunks/AAG3YkeP.js";import{w as nt,o as it}from"../chunks/CWqVLV4S.js";import{g as B}from"../chunks/Yrfdzjvm.js";import{A as n,a,i as I,L as lt,t as st}from"../chunks/CmPZXeWN.js";import{p as ct}from"../chunks/Bor7tEHN.js";import{L as ft}from"../chunks/BSgAB85Y.js";import{P as ut}from"../chunks/Btge_8wu.js";import{L as ht}from"../chunks/BgpIMWyK.js";var i={BACKEND_CANISTER_ID:"elbip-aiaaa-aaaal-qjfhq-cai",FRONTEND_CANISTER_ID:"gw4gh-taaaa-aaaal-qjfia-cai",DFX_NETWORK:"ic"};class k{constructor(){}async getGolfChannels(e){try{let r=await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).getGolfChannels(e);return I(r)&&console.error("Error Fetching Golf Channels",r),r.ok}catch(t){throw console.error("Error Fetching Golf Channels",t),t}}async getGolfChannel(e){const r=await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID)).getGolfCourse(e);if(I(r))throw new Error("Failed to get golf course");return r.ok}async createGolfChannel(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).createGolfChannel(e)).ok}catch(t){throw console.error("Error creating golf channel:",t),t}}async getGolfChannelVideos(e){const r=await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID)).getGolfChannelVideos(e);if(I(r))throw new Error("Failed to get golf channel videos");return r.ok}async getGolfChannelVideo(e){const r=await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID)).getGolfChannelVideo(e);if(I(r))throw new Error("Failed to get golf channel video");return r.ok}async updateGolfChannel(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).updateGolfChannel(e)).ok}catch(t){throw console.error("Error updating golf channel:",t),t}}async deleteGolfChannel(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).deleteGolfChannel(e)).ok}catch(t){throw console.error("Error deleting golf channel:",t),t}}async subscribeToGolfChannel(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).subscribeToGolfChannel(e)).ok}catch(t){throw console.error("Error subscribing to golf channel:",t),t}}async unsubscribeFromGolfChannel(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).unsubscribeFromGolfChannel(e)).ok}catch(t){throw console.error("Error unsubscribing from golf channel:",t),t}}async uploadGolfChannelVideo(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).uploadGolfChannelVideo(e)).ok}catch(t){throw console.error("Error uploading golf channel video:",t),t}}async removeGolfChannelVideo(e){try{return(await(await n.createIdentityActor(a,i.BACKEND_CANISTER_ID??"")).removeGolfChannelVideo(e)).ok}catch(t){throw console.error("Error removing golf channel video:",t),t}}}function dt(){const{subscribe:C,set:e}=nt(void 0);async function t(s){return await new k().getGolfChannel(s)}async function r(s){return new k().getGolfChannels(s)}return{subscribe:C,setGolfChannel:s=>e(s),getGolfChannel:t,getGolfChannels:r}}const gt=dt();function Ct(C,e){ct(e,"golfChannel",8)}var yt=D("<p>No golf channels found.</p>"),At=D("<!> <!>",1),_t=D("<p>Error loading golf channels.</p>");function kt(C,e){U(e,!1);const[t,r]=ot(),s=()=>at(a,"$authStore",t);let N=E(!0),l=E(null),y=E(1n),G=E(1n);it(async()=>{S()});function K(){B("/golf-channels/create")}async function F(A){const c=Number(o(y))+A;c>=1&&c<=Number(o(G))&&(g(y,BigInt(c)),await S())}async function S(){g(N,!0);try{const c=s().identity?.getPrincipal();if(!c){B("/");return}let _={page:o(y),user_id:c.toString(),searchTerm:""};g(l,await gt.getGolfChannels(_)),o(l)?.total&&o(l)?.pageSize&&g(G,BigInt(Math.ceil(Number(o(l).total)/Number(o(l).pageSize))))}catch{st.addToast({type:"error",message:"Error loading golf channels."}),g(l,null)}finally{g(N,!1)}}Q(),lt(C,{children:(A,c)=>{var _=v(),L=w(_);{var P=f=>{ht(f)},$=f=>{ft(f,{title:"GOLF CHANNELS",buttonTitle:"CREATE CHANNEL",buttonCallback:K,children:(V,pt)=>{var T=v(),q=w(T);{var x=u=>{var p=At(),R=w(p);{var O=h=>{var m=v(),W=w(m);et(W,1,()=>o(l)?.entries,rt,(X,J)=>{Ct(X,{get golfChannel(){return o(J)}})}),d(h,m)},j=h=>{var m=yt();d(h,m)};b(R,h=>{o(l).entries.length>0?h(O):h(j,!1)})}var H=Z(R,2);const M=tt(()=>Number(o(y)));ut(H,{changePage:F,get currentPage(){return o(M)},get totalPages(){return o(G)}}),d(u,p)},z=u=>{var p=_t();d(u,p)};b(q,u=>{o(l)?u(x):u(z,!1)})}d(V,T)},$$slots:{default:!0}})};b(L,f=>{o(N)?f(P):f($,!1)})}d(A,_)},$$slots:{default:!0}}),Y(),r()}export{kt as component};
